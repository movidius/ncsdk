<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>ncFifoReadElem() [C NCAPI v2] | Intel® Movidius™ Neural Compute SDK Documentation</title>
<link rel="stylesheet" href="../../../css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="../../../css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="../../../css/customstyles.css">
<link rel="stylesheet" href="../../../css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="../../../css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="../../../js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="../../../js/toc.js"></script>
<script src="../../../js/customscripts.js"></script>

<link rel="shortcut icon" href="../../../images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>ncFifoReadElem() [C NCAPI v2]</title>
<meta name="generator" content="Jekyll v3.8.1" />
<meta property="og:title" content="ncFifoReadElem() [C NCAPI v2]" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Documentation for the Intel® Movidius™ Neural Compute SDK and Intel® Movidius™ Neural Compute API." />
<meta property="og:description" content="Documentation for the Intel® Movidius™ Neural Compute SDK and Intel® Movidius™ Neural Compute API." />
<link rel="canonical" href="https://movidius.github.io/ncsdk/ncapi/ncapi2/c_api/ncFifoReadElem.html" />
<meta property="og:url" content="https://movidius.github.io/ncsdk/ncapi/ncapi2/c_api/ncFifoReadElem.html" />
<script type="application/ld+json">
{"description":"Documentation for the Intel® Movidius™ Neural Compute SDK and Intel® Movidius™ Neural Compute API.","@type":"WebPage","url":"https://movidius.github.io/ncsdk/ncapi/ncapi2/c_api/ncFifoReadElem.html","headline":"ncFifoReadElem() [C NCAPI v2]","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });
        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="../../../index.html">&nbsp;<span class="projectTitle"> Intel® Movidius™ Neural Compute SDK</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button 
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
		-->
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://developer.movidius.com/repo" target="_blank">GitHub</a></li>
                
                
                
                <li><a href="https://developer.movidius.com/blog" target="_blank">Blog</a></li>
                
                
                
                <li><a href="https://developer.movidius.com/forums" target="_blank">User Forum</a></li>
                
                
                
                <li><a href="https://developer.movidius.com/examples" target="_blank">NC App Zoo</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="../../../js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: '../../../search.json',
                                searchResultTemplate: '<li><a href="https://movidius.github.io/ncsdk{url}" title="">{display}</a></li>',
                    noResultsText: '',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">NCSDK C API 2.x</li>
    
    
    
    
    
    <li class="singlenav">
    
    <a href="../../../ncapi/ncapi2/c_api/readme.html">Overview</a>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Enumerations</a>
        <ul>
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceHwVersion_t.html">ncDeviceHwVersion_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceOption_t.html">ncDeviceOption_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceState_t.html">ncDeviceState_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoDataType_t.html">ncFifoDataType_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoOption_t.html">ncFifoOption_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoState_t.html">ncFifoState_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoType_t.html">ncFifoType_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGlobalOption_t.html">ncGlobalOption_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphOption_t.html">ncGraphOption_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphState_t.html">ncGraphState_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncLogLevel_t.html">ncLogLevel_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncStatus_t.html">ncStatus_t</a></li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Structures</a>
        <ul>
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceHandle_t.html">ncDeviceHandle_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoHandle_t.html">ncFifoHandle_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphHandle_t.html">ncGraphHandle_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncTensorDescriptor_t.html">ncTensorDescriptor_t</a></li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Global Functions</a>
        <ul>
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGlobalGetOption.html">ncGlobalGetOption()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGlobalSetOption.html">ncGlobalSetOption()</a></li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Device Functions</a>
        <ul>
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceClose.html">ncDeviceClose()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceCreate.html">ncDeviceCreate()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceDestroy.html">ncDeviceDestroy()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceGetOption.html">ncDeviceGetOption()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceOpen.html">ncDeviceOpen()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceSetOption.html">ncDeviceSetOption()</a></li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Fifo Functions</a>
        <ul>
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Graph Functions</a>
        <ul>
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphAllocate.html">ncGraphAllocate()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphAllocateWithFifos.html">ncGraphAllocateWithFifos()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphAllocateWithFifosEx.html">ncGraphAllocateWithFifosEx()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphCreate.html">ncGraphCreate()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphDestroy.html">ncGraphDestroy()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphGetOption.html">ncGraphGetOption()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphQueueInference.html">ncGraphQueueInference()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphQueueInferenceWithFifoElem.html">ncGraphQueueInferenceWithFifoElem()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphSetOption.html">ncGraphSetOption()</a></li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    <!-- if you aren't using the accordion, uncomment this block:
       <p class="external">
           <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
       </p>
       -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <h1 id="ncfiforeadelem">ncFifoReadElem()</h1>

<table>
  <thead>
    <tr>
      <th>Info</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Header</td>
      <td>mvnc.h</td>
    </tr>
    <tr>
      <td>Library</td>
      <td>libmvnc.so</td>
    </tr>
    <tr>
      <td>Version</td>
      <td>2.0</td>
    </tr>
    <tr>
      <td>See also</td>
      <td><a href="ncFifoHandle_t.html">struct ncFifoHandle_t</a>, <a href="ncGraphQueueInference.html">ncGraphQueueInference()</a></td>
    </tr>
  </tbody>
</table>

<h2 id="overview">Overview</h2>
<p>This function reads an element from a FIFO, usually the result of an inference, along with the associated user-defined data that was passed to <a href="ncGraphQueueInferenceWithFifoElem.html">ncGraphQueueInferenceWithFifoElem()</a> or <a href="ncFifoWriteElem.html">ncFifoWriteElem()</a>.</p>

<p>This will also remove the element from the queue.</p>

<h2 id="prototype">Prototype</h2>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ncStatus_t</span> <span class="n">ncFifoReadElem</span><span class="p">(</span><span class="k">struct</span> <span class="n">ncFifoHandle_t</span><span class="o">*</span> <span class="n">fifoHandle</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">outputData</span><span class="p">,</span>
                          <span class="kt">unsigned</span> <span class="kt">int</span><span class="o">*</span> <span class="n">outputDataLen</span><span class="p">,</span> <span class="kt">void</span><span class="o">**</span> <span class="n">userParam</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="parameters">Parameters</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fifo</td>
      <td><a href="ncFifoHandle_t.html">struct ncFifoHandle_t</a>*</td>
      <td>A pointer to the ncFifoHandle_t struct for the FIFO. The FIFO state must be <a href="ncFifoType_t.html">NC_FIFO_ALLOCATED</a>.</td>
    </tr>
    <tr>
      <td>outputData</td>
      <td>void*</td>
      <td>A pointer to a buffer into which the result of the inference will be copied. The buffer will contain data in the format specified by the FIFO’s <a href="ncFifoOption_t.html">NC_RW_FIFO_DATA_TYPE</a> option.</td>
    </tr>
    <tr>
      <td>outputDataLen</td>
      <td>unsigned int*</td>
      <td>A pointer to an unsigned int that contains the size, in bytes, of the buffer allocated to the outputData parameter.<br /><br />Upon normal return (status code NC_OK), the unsigned int pointed to by dataLength will be set to the number of bytes copied to the data buffer. In the event that the data buffer was an insufficient size to hold the outputData, the return status code will be NC_INVALID_DATA_LENGTH and the unsigned int pointed to by dataLength will be set to the size required.</td>
    </tr>
    <tr>
      <td>userParam</td>
      <td>void**</td>
      <td>Address of a pointer that will be set to point to the user-defined data for this inference. This corresponds to the userParam that was passed when data was written to the input FIFO with <a href="ncGraphQueueInferenceWithFifoElem.html">ncGraphQueueInferenceWithFifoElem()</a> or <a href="ncFifoWriteElem.html">ncFifoWriteElem()</a>.</td>
    </tr>
  </tbody>
</table>

<h2 id="return">Return</h2>
<p>An appropriate value from the <a href="ncStatus_t.html">ncStatus_t</a> enumeration.</p>

<h2 id="notes">Notes</h2>
<ul>
  <li>The <a href="ncFifoType_t.html">ncFifoType_t</a> set during FIFO creation must allow read access for the API.</li>
  <li>The FIFO can not be written to or read from until it has been allocated with <a href="ncGraphAllocateWithFifos.html">ncGraphAllocateWithFifos()</a>/<a href="ncGraphAllocateWithFifosEx.html">ncGraphAllocateWithFifosEx()</a> or <a href="ncFifoAllocate.html">ncFifoAllocate()</a>.</li>
  <li>The API can only read each element once even if <a href="ncFifoOption_t.html">NC_RW_FIFO_CONSUMER_COUNT</a> is greater than 1.</li>
  <li>This is a blocking call if <a href="ncFifoOption_t.html">NC_RW_FIFO_DONT_BLOCK</a> is false. If the FIFO is empty this function will not return until there is an element to read.
    <ul>
      <li>You can check the current fill level of the FIFO with <a href="ncFifoGetOption.html">ncFifoGetOption()</a> for <a href="ncFifoOption_t.html">NC_RO_FIFO_READ_FILL_LEVEL</a>.</li>
      <li>After an inference is queued there is a delay while device communication occurs and the inference is performed before the element is removed from the input FIFO and placed into the output FIFO.</li>
    </ul>
  </li>
  <li>If you don’t know what value to use for outputDataLen, you can call this function once with an outputDataLen of 0 to have outputDataLen be set to the correct value, and then call this function again to get the output result in outputData.</li>
</ul>

<h2 id="example">Example</h2>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;mvnc.h&gt;
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">networkMean</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">.</span><span class="mi">40787054</span><span class="o">*</span><span class="mi">255</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">45752458</span><span class="o">*</span><span class="mi">255</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">48109378</span><span class="o">*</span><span class="mi">255</span><span class="p">.</span><span class="mi">0</span><span class="p">};</span>
    <span class="n">ncStatus_t</span> <span class="n">retCode</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">ncDeviceHandle_t</span><span class="o">*</span> <span class="n">deviceHandlePtr</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">ncGraphHandle_t</span><span class="o">*</span> <span class="n">graphHandlePtr</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">ncFifoHandle_t</span><span class="o">*</span> <span class="n">inFifoHandlePtr</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">ncFifoHandle_t</span><span class="o">*</span> <span class="n">outFifoHandlePtr</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">ncTensorDescriptor_t</span> <span class="n">inTensorDesc</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">ncTensorDescriptor_t</span> <span class="n">outTensorDesc</span><span class="p">;</span>
    <span class="kt">float</span><span class="o">*</span> <span class="n">imageInMemoryPtr</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">optionSize</span><span class="p">;</span>

    <span class="n">ncDeviceCreate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">deviceHandlePtr</span><span class="p">);</span>
    <span class="n">ncDeviceOpen</span><span class="p">(</span><span class="n">deviceHandlePtr</span><span class="p">);</span>
    <span class="n">ncGraphCreate</span><span class="p">(</span><span class="s">"My Graph"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">graphHandlePtr</span><span class="p">);</span>
    
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">graphSizeInBytes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span> <span class="n">graphInMemoryPtr</span> <span class="o">=</span> <span class="n">LoadGraphFile</span><span class="p">(</span><span class="s">"./graph"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">graphSizeInBytes</span><span class="p">);</span>
    <span class="n">ncGraphAllocate</span><span class="p">(</span><span class="n">deviceHandlePtr</span><span class="p">,</span> <span class="n">graphHandlePtr</span><span class="p">,</span> <span class="n">graphInMemoryPtr</span><span class="p">,</span> <span class="n">graphSizeInBytes</span><span class="p">);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">graphInMemoryPtr</span><span class="p">);</span>

    <span class="n">ncFifoCreate</span><span class="p">(</span><span class="s">"MY Input FIFO"</span><span class="p">,</span> <span class="n">NC_FIFO_HOST_WO</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">inFifoHandlePtr</span><span class="p">);</span>
    <span class="n">optionSize</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">ncTensorDescriptor_t</span><span class="p">);</span>
    <span class="n">ncGraphGetOption</span><span class="p">(</span><span class="n">graphHandlePtr</span><span class="p">,</span> <span class="n">NC_RO_GRAPH_INPUT_TENSOR_DESCRIPTORS</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">inTensorDesc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">optionSize</span><span class="p">);</span>
    <span class="n">ncFifoAllocate</span><span class="p">(</span><span class="n">inFifoHandlePtr</span><span class="p">,</span> <span class="n">deviceHandlePtr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">inTensorDesc</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    
    <span class="n">ncFifoCreate</span><span class="p">(</span><span class="s">"MY Output FIFO"</span><span class="p">,</span> <span class="n">NC_FIFO_HOST_RO</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">outFifoHandlePtr</span><span class="p">);</span>
    <span class="n">optionSize</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">ncTensorDescriptor_t</span><span class="p">);</span>
    <span class="n">ncGraphGetOption</span><span class="p">(</span><span class="n">graphHandlePtr</span><span class="p">,</span> <span class="n">NC_RO_GRAPH_OUTPUT_TENSOR_DESCRIPTORS</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">outTensorDesc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">optionSize</span><span class="p">);</span>
    <span class="n">ncFifoAllocate</span><span class="p">(</span><span class="n">outFifoHandlePtr</span><span class="p">,</span> <span class="n">deviceHandlePtr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">outTensorDesc</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">networkDim</span> <span class="o">=</span> <span class="mi">224</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">numChannels</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="n">imageInMemoryPtr</span> <span class="o">=</span> <span class="n">LoadImage32</span><span class="p">(</span><span class="s">"./my_image.png"</span><span class="p">,</span> <span class="n">networkDim</span><span class="p">,</span> <span class="n">networkMean</span><span class="p">);</span>
    <span class="n">imageSize</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">)</span> <span class="o">*</span> <span class="n">networkDim</span> <span class="o">*</span> <span class="n">networkDim</span> <span class="o">*</span> <span class="n">numChannels</span><span class="p">;</span>
    <span class="n">ncFifoWriteElem</span><span class="p">(</span><span class="n">inFifoHandlePtr</span><span class="p">,</span> <span class="n">imageInMemoryPtr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">imageSize</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">imageInMemoryPtr</span><span class="p">);</span>

    <span class="n">ncGraphQueueInference</span><span class="p">(</span><span class="n">graphHandlePtr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">inFifoHandlePtr</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">outFifoHandlePtr</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

    <span class="kt">void</span><span class="o">*</span> <span class="n">outputPtr</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fifoOutputSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">optionDataLen</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">);</span>
    <span class="n">ncFifoGetOption</span><span class="p">(</span><span class="n">outFifoHandlePtr</span><span class="p">,</span> <span class="n">NC_RO_FIFO_ELEMENT_DATA_SIZE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">fifoOutputSize</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">optionDataLen</span><span class="p">);</span>
    <span class="n">outputPtr</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="n">fifoOutputSize</span><span class="p">);</span>
    <span class="n">ncFifoReadElem</span><span class="p">(</span><span class="n">outFifoHandlePtr</span><span class="p">,</span> <span class="n">outputPtr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">fifoOutputSize</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">retCode</span> <span class="o">!=</span> <span class="n">NC_OK</span><span class="p">)</span>
    <span class="p">{</span>   <span class="c1">// Could not read FIFO element</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Error reading FIFO element [%d]</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">retCode</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>   <span class="c1">// outputPtr now points to the result of the inference</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Successfully read FIFO element</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>        
    <span class="p">}</span>
    
    <span class="c1">// use the output, then free it</span>
    <span class="n">free</span><span class="p">(</span><span class="n">outputPtr</span><span class="p">);</span>
    <span class="n">outputPtr</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    
    <span class="c1">// clean up the graph and device</span>
    <span class="n">ncFifoDestroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">inFifoHandlePtr</span><span class="p">);</span>
    <span class="n">ncFifoDestroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">outFifoHandlePtr</span><span class="p">);</span>
    <span class="n">ncGraphDestroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">graphHandlePtr</span><span class="p">);</span>
    <span class="n">ncDeviceClose</span><span class="p">(</span><span class="n">deviceHandlePtr</span><span class="p">);</span>
    <span class="n">ncDeviceDestroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">deviceHandlePtr</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2018 Intel Corporation <br />
                    * Other names and brands may be claimed as the property of others.
                </div>
            </div>
</footer>

</html>

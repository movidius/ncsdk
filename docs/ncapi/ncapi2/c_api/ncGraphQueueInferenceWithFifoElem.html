<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>ncGraphQueueInferenceWithFifoElem() [C NCAPI v2] | Intel® Movidius™ Neural Compute SDK Documentation</title>
<link rel="stylesheet" href="../../../css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="../../../css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="../../../css/customstyles.css">
<link rel="stylesheet" href="../../../css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="../../../css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="../../../js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="../../../js/toc.js"></script>
<script src="../../../js/customscripts.js"></script>

<link rel="shortcut icon" href="../../../images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>ncGraphQueueInferenceWithFifoElem() [C NCAPI v2]</title>
<meta name="generator" content="Jekyll v3.8.1" />
<meta property="og:title" content="ncGraphQueueInferenceWithFifoElem() [C NCAPI v2]" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Documentation for the Intel® Movidius™ Neural Compute SDK and Intel® Movidius™ Neural Compute API." />
<meta property="og:description" content="Documentation for the Intel® Movidius™ Neural Compute SDK and Intel® Movidius™ Neural Compute API." />
<link rel="canonical" href="https://movidius.github.io/ncsdk/ncapi/ncapi2/c_api/ncGraphQueueInferenceWithFifoElem.html" />
<meta property="og:url" content="https://movidius.github.io/ncsdk/ncapi/ncapi2/c_api/ncGraphQueueInferenceWithFifoElem.html" />
<script type="application/ld+json">
{"url":"https://movidius.github.io/ncsdk/ncapi/ncapi2/c_api/ncGraphQueueInferenceWithFifoElem.html","description":"Documentation for the Intel® Movidius™ Neural Compute SDK and Intel® Movidius™ Neural Compute API.","headline":"ncGraphQueueInferenceWithFifoElem() [C NCAPI v2]","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });
        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="../../../index.html">&nbsp;<span class="projectTitle"> Intel® Movidius™ Neural Compute SDK</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button 
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
		-->
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://developer.movidius.com/repo" target="_blank">GitHub</a></li>
                
                
                
                <li><a href="https://developer.movidius.com/blog" target="_blank">Blog</a></li>
                
                
                
                <li><a href="https://developer.movidius.com/forums" target="_blank">User Forum</a></li>
                
                
                
                <li><a href="https://developer.movidius.com/examples" target="_blank">NC App Zoo</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="../../../js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: '../../../search.json',
                                searchResultTemplate: '<li><a href="https://movidius.github.io/ncsdk{url}" title="">{display}</a></li>',
                    noResultsText: '',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">NCSDK C API 2.x</li>
    
    
    
    
    
    <li class="singlenav">
    
    <a href="../../../ncapi/ncapi2/c_api/readme.html">Overview</a>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Enumerations</a>
        <ul>
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceHwVersion_t.html">ncDeviceHwVersion_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceOption_t.html">ncDeviceOption_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceState_t.html">ncDeviceState_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoDataType_t.html">ncFifoDataType_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoOption_t.html">ncFifoOption_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoState_t.html">ncFifoState_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoType_t.html">ncFifoType_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGlobalOption_t.html">ncGlobalOption_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphOption_t.html">ncGraphOption_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphState_t.html">ncGraphState_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncLogLevel_t.html">ncLogLevel_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncStatus_t.html">ncStatus_t</a></li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Structures</a>
        <ul>
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceHandle_t.html">ncDeviceHandle_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoHandle_t.html">ncFifoHandle_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphHandle_t.html">ncGraphHandle_t</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncTensorDescriptor_t.html">ncTensorDescriptor_t</a></li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Global Functions</a>
        <ul>
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGlobalGetOption.html">ncGlobalGetOption()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGlobalSetOption.html">ncGlobalSetOption()</a></li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Device Functions</a>
        <ul>
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceClose.html">ncDeviceClose()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceCreate.html">ncDeviceCreate()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceDestroy.html">ncDeviceDestroy()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceGetOption.html">ncDeviceGetOption()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceOpen.html">ncDeviceOpen()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncDeviceSetOption.html">ncDeviceSetOption()</a></li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Fifo Functions</a>
        <ul>
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoAllocate.html">ncFifoAllocate()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoCreate.html">ncFifoCreate()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoDestroy.html">ncFifoDestroy()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoGetOption.html">Fifo.ncFifoGetOption()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoReadElem.html">ncFifoReadElem()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoRemoveElem.html">ncFifoRemoveElem()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoSetOption.html">ncFifoSetOption()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncFifoWriteElem.html">ncFifoWriteElem()</a></li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Graph Functions</a>
        <ul>
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphAllocate.html">ncGraphAllocate()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphAllocateWithFifos.html">ncGraphAllocateWithFifos()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphAllocateWithFifosEx.html">ncGraphAllocateWithFifosEx()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphCreate.html">ncGraphCreate()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphDestroy.html">ncGraphDestroy()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphGetOption.html">ncGraphGetOption()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphQueueInference.html">ncGraphQueueInference()</a></li>
            
            
            
            
            
            
            <li class="active"><a href="../../../ncapi/ncapi2/c_api/ncGraphQueueInferenceWithFifoElem.html">ncGraphQueueInferenceWithFifoElem()</a></li>
            
            
            
            
            
            
            <li><a href="../../../ncapi/ncapi2/c_api/ncGraphSetOption.html">ncGraphSetOption()</a></li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    <!-- if you aren't using the accordion, uncomment this block:
       <p class="external">
           <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
       </p>
       -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <h1 id="ncgraphqueueinferencewithfifoelem">ncGraphQueueInferenceWithFifoElem()</h1>

<table>
  <thead>
    <tr>
      <th>Info</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Header</td>
      <td>mvnc.h</td>
    </tr>
    <tr>
      <td>Library</td>
      <td>libmvnc.so</td>
    </tr>
    <tr>
      <td>Version</td>
      <td>2.0</td>
    </tr>
    <tr>
      <td>See also</td>
      <td><a href="ncGraphHandle_t.html">struct ncGraphHandle_t</a>, <a href="ncFifoHandle_t.html">struct ncFifoHandle_t</a>, <a href="ncGraphQueueInference.html">ncGraphQueueInference()</a>, <a href="ncFifoWriteElem.html">ncFifoWriteElem()</a></td>
    </tr>
  </tbody>
</table>

<h2 id="overview">Overview</h2>
<p>This function writes an element to a FIFO, usually an input tensor for inference, and queues an inference to be processed by a graph. This is a convenient way to write an input tensor and queue an inference in one call.</p>

<h2 id="prototype">Prototype</h2>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ncStatus_t</span> <span class="n">ncGraphQueueInferenceWithFifoElem</span><span class="p">(</span>
    <span class="k">struct</span> <span class="n">ncGraphHandle_t</span><span class="o">*</span> <span class="n">graphHandle</span><span class="p">,</span>
    <span class="k">struct</span> <span class="n">ncFifoHandle_t</span><span class="o">*</span> <span class="n">fifoIn</span><span class="p">,</span>
    <span class="k">struct</span> <span class="n">ncFifoHandle_t</span><span class="o">*</span> <span class="n">fifoOut</span><span class="p">,</span> 
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span> <span class="n">inputTensor</span><span class="p">,</span>
    <span class="kt">unsigned</span> <span class="kt">int</span><span class="o">*</span> <span class="n">inputTensorLength</span><span class="p">,</span> 
    <span class="kt">void</span><span class="o">*</span> <span class="n">userParam</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="parameters">Parameters</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>graphHandle</td>
      <td><a href="ncGraphHandle_t.html">struct ncGraphHandle_t</a>*</td>
      <td>A pointer to an ncGraphHandle_t struct for the graph that will be used for inference. The graph state must be <a href="ncGraphState_t.html">NC_GRAPH_ALLOCATED</a>.</td>
    </tr>
    <tr>
      <td>fifoIn</td>
      <td><a href="ncFifoHandle_t.html">struct ncFifoHandle_t</a>*</td>
      <td>A pointer to the ncFifoHandle_t struct for the input queue from which the tensor will be read. The FIFO state must be <a href="ncFifoState_t.html">NC_FIFO_ALLOCATED</a>.</td>
    </tr>
    <tr>
      <td>fifoOut</td>
      <td><a href="ncFifoHandle_t.html">struct ncFifoHandle_t</a>*</td>
      <td>A pointer to the ncFifoHandle_t struct for the output queue on which the inference result will be placed. The FIFO state must be <a href="ncFifoState_t.html">NC_FIFO_ALLOCATED</a>.</td>
    </tr>
    <tr>
      <td>inputTensor</td>
      <td>const void*</td>
      <td>A pointer to a tensor data buffer that contains data in the format specified by the FIFO’s <a href="ncFifoDataType_t.html">NC_RW_FIFO_DATA_TYPE</a> option.  This data is typically a representation of each color channel in each pixel of an image.</td>
    </tr>
    <tr>
      <td>inputTensorLength</td>
      <td>unsigned int*</td>
      <td>A pointer to an unsigned int that contains the length, in bytes, of the buffer that the inputTensor parameter points to.<br /><br />If the size of the input tensor does not match the expected input size for this FIFO, the return status code will be <a href="ncStatus_t.html">NC_INVALID_DATA_LENGTH</a> and inputTensorLength will be set to the expected input size.</td>
    </tr>
    <tr>
      <td>userParam</td>
      <td>void*</td>
      <td>A pointer to additional user data to associate with the input tensor, or NULL. The pointer value (not the data that it points to) will be copied, stored, and then returned with the inference result with <a href="ncFifoReadElem.html">ncFifoReadElem()</a>. This pointer can point to anything that the caller would like to associate with the inference result, such as the original inference input or a window handle. The caller is responsible for allocating and freeing any memory that this pointer references.</td>
    </tr>
  </tbody>
</table>

<h2 id="return">Return</h2>
<p>An appropriate value from the <a href="ncStatus_t.html">ncStatus_t</a> enumeration.</p>

<p>If the size of the input tensor does not match the expected input size for this FIFO, the return status code will be <a href="ncStatus_t.html">NC_INVALID_DATA_LENGTH</a> and the inputTensorLength will be set to the expected input size.</p>

<h2 id="notes">Notes</h2>
<ul>
  <li>This function takes the place of explicit calls to <a href="ncFifoWriteElem.html">ncFifoWriteElem()</a> and <a href="ncGraphQueueInference.html">ncGraphQueueInference()</a>.</li>
  <li>The input FIFO must allow <a href="ncFifoType_t.html">write access</a> for the API and the output FIFO must allow <a href="ncFifoType_t.html">read access</a> for the API.</li>
  <li><a href="ncFifoWriteElem.html">ncFifoWriteElem()</a>, which is called internally by this function, is a blocking call if <a href="ncFifoOption_t.html">NC_RW_FIFO_DONT_BLOCK</a> is false. If the input FIFO is full this function will not return until there is space to write to the FIFO.
    <ul>
      <li>The input FIFO’s capacity is set when the FIFO is allocated with <a href="ncGraphAllocateWithFifos.html">ncGraphAllocateWithFifos()</a>/<a href="ncGraphAllocateWithFifosEx.html">ncGraphAllocateWithFifosEx()</a> or <a href="ncFifoAllocate.html">ncFifoAllocate()</a>.</li>
      <li>You can check the capacity and the current fill level of the input FIFO with <a href="ncFifoGetOption.html">ncFifoGetOption()</a> for <a href="ncFifoOption_t.html">NC_RO_FIFO_CAPACITY</a> and <a href="ncFifoOption_t.html">NC_RO_FIFO_WRITE_FILL_LEVEL</a>.</li>
    </ul>
  </li>
</ul>

<h2 id="example">Example</h2>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;mvnc.h&gt;
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// You can check that this return code is equal to NC_OK after each API function call</span>
    <span class="c1">// This is omitted in this example for better readability</span>
    <span class="n">ncStatus_t</span> <span class="n">retCode</span><span class="p">;</span>

    <span class="c1">// Initialize and open a device</span>
    <span class="k">struct</span> <span class="n">ncDeviceHandle_t</span><span class="o">*</span> <span class="n">deviceHandle</span><span class="p">;</span>
    <span class="n">retCode</span> <span class="o">=</span> <span class="n">ncDeviceCreate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">deviceHandle</span><span class="p">);</span>
    <span class="n">retCode</span> <span class="o">=</span> <span class="n">ncDeviceOpen</span><span class="p">(</span><span class="n">deviceHandle</span><span class="p">);</span>

    <span class="c1">// Load a graph from file</span>
    <span class="c1">// void* graphBuffer = ...</span>
    <span class="c1">// unsigned int graphBufferLength = ...</span>
    
    <span class="c1">// Initialize the graph</span>
    <span class="k">struct</span> <span class="n">ncGraphHandle_t</span><span class="o">*</span> <span class="n">graphHandle</span><span class="p">;</span>
    <span class="n">retCode</span> <span class="o">=</span> <span class="n">ncGraphCreate</span><span class="p">(</span><span class="s">"graph1"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">graphHandle</span><span class="p">);</span>
       
    <span class="c1">// CONVENIENCE FUNCTION: Allocate the graph to the device and create input/output FIFOs with default options</span>
    <span class="c1">// Alternatively, use ncGraphAllocateWithFifosEx() to do this with explicit FIFO options</span>
    <span class="k">struct</span> <span class="n">ncFifoHandle_t</span><span class="o">*</span> <span class="n">inputFIFO</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">ncFifoHandle_t</span><span class="o">*</span> <span class="n">outputFIFO</span><span class="p">;</span>
    <span class="n">retCode</span> <span class="o">=</span> <span class="n">ncGraphAllocateWithFifos</span><span class="p">(</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">graphHandle</span><span class="p">,</span> <span class="n">graphBuffer</span><span class="p">,</span> <span class="n">graphBufferLength</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">inputFIFO</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">outputFIFO</span><span class="p">);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">graphBuffer</span><span class="p">);</span>

    <span class="c1">// Read and preprocess input...</span>
    <span class="c1">// float* imageBuffer = ...</span>
    <span class="c1">// unsigned int imageBufferLength = ...</span>

    <span class="c1">// Write the image to the input FIFO and queue the inference</span>
    <span class="n">retCode</span> <span class="o">=</span> <span class="n">ncGraphQueueInferenceWithFifoElem</span><span class="p">(</span>
                    <span class="n">graphHandle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">inputFIFO</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">outputFIFO</span><span class="p">,</span>
                    <span class="n">imageBuffer</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">imageBufferLength</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>    
    
    <span class="c1">// Get the results from the output FIFO</span>
    <span class="kt">void</span><span class="o">*</span> <span class="n">result</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fifoOutputSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">optionDataLen</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">fifoOutputSize</span><span class="p">);</span>
    <span class="n">ncFifoGetOption</span><span class="p">(</span><span class="n">outFifoHandlePtr</span><span class="p">,</span> <span class="n">NC_RO_FIFO_ELEMENT_DATA_SIZE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">fifoOutputSize</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">optionDataLen</span><span class="p">);</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="n">fifoOutputSize</span><span class="p">);</span>    
    <span class="n">retCode</span> <span class="o">=</span> <span class="n">ncFifoReadElem</span><span class="p">(</span><span class="n">outputFIFO</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">fifoOutputSize</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>

    <span class="c1">// Do something with the results...</span>

    <span class="c1">// Clean up</span>
    <span class="n">retCode</span> <span class="o">=</span> <span class="n">ncFifoDestroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">inputFIFO</span><span class="p">);</span>
    <span class="n">retCode</span> <span class="o">=</span> <span class="n">ncFifoDestroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">outputFIFO</span><span class="p">);</span>
    <span class="n">retCode</span> <span class="o">=</span> <span class="n">ncGraphDestroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">graphHandle</span><span class="p">);</span>
    <span class="n">retCode</span> <span class="o">=</span> <span class="n">ncDeviceClose</span><span class="p">(</span><span class="n">deviceHandle</span><span class="p">);</span>
    <span class="n">retCode</span> <span class="o">=</span> <span class="n">ncDeviceDestroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">deviceHandle</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2019 Intel Corporation <br />
                    * Other names and brands may be claimed as the property of others.
                </div>
            </div>
</footer>

</html>

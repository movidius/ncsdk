<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Installation and Configuration with Docker | Intel® Movidius™ Neural Compute SDK Documentation</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Installation and Configuration with Docker</title>
<meta name="generator" content="Jekyll v3.8.1" />
<meta property="og:title" content="Installation and Configuration with Docker" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Documentation for the Intel® Movidius™ Neural Compute SDK and Intel® Movidius™ Neural Compute API." />
<meta property="og:description" content="Documentation for the Intel® Movidius™ Neural Compute SDK and Intel® Movidius™ Neural Compute API." />
<link rel="canonical" href="https://movidius.github.io/ncsdk/docker.html" />
<meta property="og:url" content="https://movidius.github.io/ncsdk/docker.html" />
<script type="application/ld+json">
{"url":"https://movidius.github.io/ncsdk/docker.html","description":"Documentation for the Intel® Movidius™ Neural Compute SDK and Intel® Movidius™ Neural Compute API.","headline":"Installation and Configuration with Docker","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });
        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Intel® Movidius™ Neural Compute SDK</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button 
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
		-->
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://developer.movidius.com/repo" target="_blank">GitHub</a></li>
                
                
                
                <li><a href="https://developer.movidius.com/blog" target="_blank">Blog</a></li>
                
                
                
                <li><a href="https://developer.movidius.com/forums" target="_blank">User Forum</a></li>
                
                
                
                <li><a href="https://developer.movidius.com/examples" target="_blank">NC App Zoo</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="https://movidius.github.io/ncsdk{url}" title="">{display}</a></li>',
                    noResultsText: '',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">NCSDK Documentation </li>
    
    
    
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li><a href="index.html">Introduction</a></li>
            
            
            
            
            
            
            <li><a href="ncs.html">Intel® Movidius™ Neural Compute Stick</a></li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Installation</a>
        <ul>
            
            
            
            <li><a href="install.html">Basic Installation</a></li>
            
            
            
            <li class="subfolders">
                <a href="#">Other Installation Options</a>
                <ul>
                    
                    
                    
                    <li class="active"><a href="docker.html">Docker</a></li>
                    
                    
                    
                    
                    
                    <li><a href="virtualenv.html">virtualenv</a></li>
                    
                    
                    
                    
                    
                    <li><a href="vm_config.html">Virtual Machine</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Frameworks</a>
        <ul>
            
            
            
            <li><a href="configure_network.html">Network Configuration</a></li>
            
            
            
            <li class="subfolders">
                <a href="#">Caffe</a>
                <ul>
                    
                    
                    
                    <li><a href="caffe.html">Overview</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            <li class="subfolders">
                <a href="#">TensorFlow™</a>
                <ul>
                    
                    
                    
                    <li><a href="tensorflow.html">Overview</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tf_compile_guidance.html">Compilation Guidance</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tf_slim.html">Compiling TensorFlow-Slim Networks</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tf_modelzoo.html">Compiling Model Zoo Networks</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Toolkit</a>
        <ul>
            
            
            
            <li><a href="tools/tools_overview.html">Toolkit Overview</a></li>
            
            
            
            
            
            
            <li><a href="tools/compile.html">mvNCCompile</a></li>
            
            
            
            
            
            
            <li><a href="tools/check.html">mvNCCheck</a></li>
            
            
            
            
            
            
            <li><a href="tools/profile.html">mvNCProfile</a></li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">API</a>
        <ul>
            
            
            
            <li><a href="ncapi/readme.html">Overview</a></li>
            
            
            
            <li class="subfolders">
                <a href="#">NCAPI v2</a>
                <ul>
                    
                    
                    
                    <li><a href="ncapi/ncapi2/py_api/readme.html">Python</a></li>
                    
                    
                    
                    
                    
                    <li><a href="ncapi/ncapi2/c_api/readme.html">C/C++</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            <li class="subfolders">
                <a href="#">NCAPI v1</a>
                <ul>
                    
                    
                    
                    <li><a href="ncapi/ncapi1/py_api/readme.html">Python</a></li>
                    
                    
                    
                    
                    
                    <li><a href="ncapi/ncapi1/c_api/readme.html">C/C++</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            <li class="subfolders">
                <a href="#">NCAPI v1 to NCAPI v2 Conversion</a>
                <ul>
                    
                    
                    
                    <li><a href="ncapi/python_api_migration.html">Python</a></li>
                    
                    
                    
                    
                    
                    <li><a href="ncapi/c_api_migration.html">C/C++</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    
    <li class="singlenav">
    
    <a href="examples.html">Examples</a>
    </li>
    
    
    
    
    
    
    <li class="singlenav">
    
    <a href="release_notes.html">Release Notes</a>
    </li>
    
    
    
    
    
    
    <li class="singlenav">
    
    <a href="support.html">Support</a>
    </li>
    
    
    
    
    <!-- if you aren't using the accordion, uncomment this block:
       <p class="external">
           <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
       </p>
       -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <h1 id="installation-and-configuration-with-docker">Installation and Configuration with Docker</h1>

<div class="bs-callout bs-callout-warning">This feature is only available with Intel® Movidius™ Neural Compute SDK 2.x.</div>

<p><a href="https://www.docker.com">Docker</a> is an open-source platform for the creation of lightweight operating-system-level virtualizations called containers for building, distributing, and running applications. Docker images are packages that include everything needed to run the container and its applications, and Docker containers are runtime instances of these images. You can read more about basic Docker concepts <a href="https://docs.docker.com/get-started/">here</a>.</p>

<p>The Intel® Movidius™ Neural Compute SDK (Intel® Movidius™ NCSDK) can be installed and run within a Docker container so that its required packages and libraries are isolated from the rest of your system.</p>

<p>This document will tell you how to use the NCSDK with Docker. These instructions assume that you will be using a neural compute device that is connected to your host machine via USB.</p>

<h2 id="install-docker-on-an-ubuntu-host">Install Docker on an Ubuntu host</h2>

<p>Go to <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu">https://docs.docker.com/install/linux/docker-ce/ubuntu/</a> and follow the instructions to install docker-ce on Ubuntu.</p>

<h3 id="proxy-configuration">Proxy Configuration</h3>

<p>See <a href="docker_proxy.html">Configuring Docker For Use With a Proxy</a>.</p>

<h3 id="sudo-configuration">sudo Configuration</h3>

<p>To use Docker in Ubuntu without having to use sudo, execute the following commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>groupadd docker
<span class="nb">sudo </span>usermod <span class="nt">-aG</span> docker <span class="nv">$USER</span>
</code></pre></div></div>

<p>Reboot your machine for this to take effect.</p>

<h3 id="other-operating-systems">Other Operating Systems</h3>

<p>These instructions have been validated in Docker Community Edition for Ubuntu. Other versions of Docker may not have the required USB support.</p>

<p>These instructions can be done in an Ubuntu <a href="vm_config.html">virtual machine</a>.</p>

<h2 id="non-privileged-docker-containers">Non-privileged Docker Containers</h2>
<p>Versions of the NCSDK prior to 2.08 required that the <em>docker run</em> command was issued with the –privileged flag.  This is due to the way the NCS device boots and loads its firmware.
If you are OK with running your docker container with the –privileged flag you can skip this section and follow the instructions in the <em>Privileged Docker Containers</em> section below.
If you want to run as docker in a non-privileged container then follow the instructions in this section.</p>

<p>There are a few concepts to be aware of when using NCS devices in a non-privileged docker container.  In this mode the NCAPI libraries within the docker container must be rebuilt with NO_BOOT=yes NO_RESET=yes flags to prevent the API from rebooting/resetting the NCS devices.  The provide docker_cmd.sh script takes care of this for you.   Also, since the API isn’t booting the devices and loading the firmware this must be done prior to running an application that uses the devices and prior to starting the docker container.  There is a seperate program provided that does this called ncs_boot_devices.
When starting the docker container the USB device name must be passed to the container with the –device flag.  The device name is not static, it changes over time so the docker_cmd.sh script also handles this.</p>

<p>To make it easier to navigate the concepts above the following instructions can be followed.</p>

<h3 id="1-create-a-docker-image-for-the-ncsdk-to-run-in-non-privileged-mode">1. Create a Docker Image for the NCSDK to run in Non-privileged Mode</h3>
<p>The provided docker file Dockerfile_NoPreviligeAccess will be used create a docker image named ‘ncsdk’ when you follow the commands below.
You must have already cloned the ncsdk repository and should be in the top level directory named ncsdk.  Note if you want to use a specific branch of the repository be sure to do git checkout for the desired branch.
After these commands are successfully executed, the docker image will contain the ncsdk and the NCAPI will have been compiled with the appropriate flags (NO_BOOT=yes and NO_RESET=yes.) within the image.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> &lt;NCSDK installation directory&gt;
<span class="nv">$ </span>docker build <span class="nt">-t</span> ncsdk <span class="nt">-f</span> ./extras/docker/Dockerfile_NoPreviligeAccess <span class="nb">.</span>
</code></pre></div></div>

<h3 id="2-prepare-ncs-devices-for-use-within-the-non-privileged-container">2. Prepare NCS Devices for Use Within the Non-privileged Container</h3>
<p>Run the following commands to build and run the ncs_boot_devices program which loads the device firmware.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$cd</span> &lt;NCSDK installation path&gt;/extras/docker/ncs_boot_devices

<span class="nv">$ </span><span class="c">#The path to api src directory is typically "../../../api/src"</span>
<span class="nv">$ </span><span class="nb">export </span><span class="nv">MVNC_API_PATH</span><span class="o">=</span>&lt;path to api src <span class="o">&gt;</span>

<span class="nv">$ </span>make ncs_boot_devices

<span class="nv">$ </span><span class="c">#Make sure all NCS devices are plugged into the host system at this point</span>
<span class="nv">$ </span><span class="c">#Run the program to boot the devices and load the firmware</span>
<span class="nv">$ </span>make run
</code></pre></div></div>

<h3 id="3-run-the-non-privileged-docker-container">3. Run the Non-privileged Docker Container.</h3>
<p>The provided docker_cmd.sh script will run the docker container for you with appropriate –device parameters.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="c">#Now the devices in the system have been booted with correct firmware.</span>
<span class="nv">$ </span><span class="c">#Start the docker container with correct --device parameters</span>
<span class="nv">$ </span><span class="nb">cd</span> &lt;NCSDK installation path&gt;/extras/docker
<span class="nv">$ </span>./docker_cmd.sh
</code></pre></div></div>

<h2 id="privileged-docker-containers">Privileged Docker Containers</h2>
<p>The simplest way to use the NCS within a docker container is to do it from a container thats running with the –privileged flag.  This is not always desirable however, so if you would rather run in a non-privileged container see the <em>Non-privileged Docker Containers</em> section above.</p>

<h3 id="1-create-a-docker-image-for-the-ncsdk-to-run-in-privileged-mode">1. Create a Docker Image for the NCSDK to Run in Privileged Mode</h3>

<p>We have provided a Dockerfile to build an Ubuntu-based Docker image that has the NCSDK installed.  This command will create an image named ‘ncsdk’.
You must have already cloned the ncsdk repository and should be in the top level directory named ncsdk.  Note if you want to use a specific branch of the repository be sure to do git checkout for the desired branch.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> &lt;NCSDK installation directory&gt;
<span class="nv">$ </span>docker build <span class="nt">-t</span> ncsdk <span class="nt">-f</span> ./extras/docker/Dockerfile <span class="nb">.</span>
</code></pre></div></div>

<h3 id="2-create-and-run-a-privileged-docker-container-from-the-built-image">2. Create and Run a Privileged Docker container from the Built Image</h3>

<p>This command will create a container named ‘ncsdk’.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">--net</span><span class="o">=</span>host <span class="nt">--privileged</span> <span class="nt">-v</span> /dev:/dev <span class="nt">--name</span> ncsdk <span class="nt">-i</span> <span class="nt">-t</span> ncsdk /bin/bash
</code></pre></div></div>

<p>The elevated permissions required via –privileged are necessary for the USB access required by the neural compute device unless following the non-privileged instructions above.</p>

<h2 id="use-your-ncsdk-container">Use your NCSDK container</h2>

<h3 id="starting-the-container">Starting the container</h3>
<p>The Docker <code class="highlighter-rouge">run</code> command creates a new container instance each time that is used. If you want to use your existing container, use the <code class="highlighter-rouge">start</code> command.
<em>(Note: The container is named ‘ncsdk’ when following both the privileged and non-privileged instructions above.)</em></p>

<ul>
  <li>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker start <span class="nt">-a</span> <span class="nt">-i</span> ncsdk
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="build-ncsdk-examples-optional">Build NCSDK examples (optional)</h3>

<p>You must have a neural compute device connected to a USB port in your host system when running this command. This command is executed inside of your Docker container.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>make examples
</code></pre></div></div>

<h3 id="exit-the-container">Exit the container</h3>

<p>This command is executed inside of your Docker container.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">exit</span>
</code></pre></div></div>

<h3 id="other-useful-docker-commands">Other useful Docker commands</h3>

<p>These commands are executed from your host terminal, not from inside the Docker container.</p>

<ul>
  <li>View a list of Docker images:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker images
</code></pre></div></div>

<ul>
  <li>Remove an image (REPOSITORY_NAME can be found with the <code class="highlighter-rouge">images</code> command):</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker rmi REPOSITORY_NAME
</code></pre></div></div>

<ul>
  <li>View a list of all Docker containers:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker container <span class="nb">ls</span> <span class="nt">-a</span>
</code></pre></div></div>

<ul>
  <li>Remove a Docker container (CONTAINER_NAME can be found with the <code class="highlighter-rouge">container ls</code> command):</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">rm </span>CONTAINER_NAME
</code></pre></div></div>

<ul>
  <li>View a list of active Docker processes:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker ps
</code></pre></div></div>

<ul>
  <li>Stop an active Docker process (CONTAINER_ID can be found with the <code class="highlighter-rouge">ps</code> command):</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker stop CONTAINER_ID
</code></pre></div></div>

<ul>
  <li>Create a Docker image from a container:</li>
</ul>

<p>Commit the image (CONTAINER_NAME can be found with the <code class="highlighter-rouge">container ls</code> command; REPOSITORY_NAME can be any name for the image).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker commit CONTAINER_ID <span class="o">[</span>REPOSITORY_NAME[:TAG]]
</code></pre></div></div>

<p>Additional <code class="highlighter-rouge">run</code> options can be seen <a href="https://docs.docker.com/engine/reference/run/">here</a>. See the instructions above if you need to configure your Docker container to run behind a proxy.</p>

        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2019 Intel Corporation <br />
                    * Other names and brands may be claimed as the property of others.
                </div>
            </div>
</footer>

</html>

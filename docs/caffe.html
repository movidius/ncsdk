<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" network, framework, model">
<title>Caffe Support | Intel® Movidius™ Neural Compute SDK Documentation</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Caffe Support</title>
<meta name="generator" content="Jekyll v3.8.1" />
<meta property="og:title" content="Caffe Support" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Documentation for the Intel® Movidius™ Neural Compute SDK and Intel® Movidius™ Neural Compute API." />
<meta property="og:description" content="Documentation for the Intel® Movidius™ Neural Compute SDK and Intel® Movidius™ Neural Compute API." />
<link rel="canonical" href="https://movidius.github.io/ncsdk/caffe.html" />
<meta property="og:url" content="https://movidius.github.io/ncsdk/caffe.html" />
<script type="application/ld+json">
{"description":"Documentation for the Intel® Movidius™ Neural Compute SDK and Intel® Movidius™ Neural Compute API.","@type":"WebPage","url":"https://movidius.github.io/ncsdk/caffe.html","headline":"Caffe Support","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });
        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Intel® Movidius™ Neural Compute SDK</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button 
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
		-->
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://developer.movidius.com/repo" target="_blank">GitHub</a></li>
                
                
                
                <li><a href="https://developer.movidius.com/blog" target="_blank">Blog</a></li>
                
                
                
                <li><a href="https://developer.movidius.com/forums" target="_blank">User Forum</a></li>
                
                
                
                <li><a href="https://developer.movidius.com/examples" target="_blank">NC App Zoo</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="https://movidius.github.io/ncsdk{url}" title="">{display}</a></li>',
                    noResultsText: '',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">NCSDK Documentation </li>
    
    
    
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li><a href="index.html">Introduction</a></li>
            
            
            
            
            
            
            <li><a href="ncs.html">Intel® Movidius™ Neural Compute Stick</a></li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Installation</a>
        <ul>
            
            
            
            <li><a href="install.html">Basic Installation</a></li>
            
            
            
            <li class="subfolders">
                <a href="#">Other Installation Options</a>
                <ul>
                    
                    
                    
                    <li><a href="docker.html">Docker</a></li>
                    
                    
                    
                    
                    
                    <li><a href="virtualenv.html">virtualenv</a></li>
                    
                    
                    
                    
                    
                    <li><a href="vm_config.html">Virtual Machine</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Frameworks</a>
        <ul>
            
            
            
            <li><a href="configure_network.html">Network Configuration</a></li>
            
            
            
            <li class="subfolders">
                <a href="#">Caffe</a>
                <ul>
                    
                    
                    
                    <li class="active"><a href="caffe.html">Overview</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            <li class="subfolders">
                <a href="#">TensorFlow™</a>
                <ul>
                    
                    
                    
                    <li><a href="tensorflow.html">Overview</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tf_compile_guidance.html">Compilation Guidance</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tf_slim.html">Compiling TensorFlow-Slim Networks</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tf_modelzoo.html">Compiling Model Zoo Networks</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">Toolkit</a>
        <ul>
            
            
            
            <li><a href="tools/tools_overview.html">Toolkit Overview</a></li>
            
            
            
            
            
            
            <li><a href="tools/compile.html">mvNCCompile</a></li>
            
            
            
            
            
            
            <li><a href="tools/check.html">mvNCCheck</a></li>
            
            
            
            
            
            
            <li><a href="tools/profile.html">mvNCProfile</a></li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    <li>
        <a href="#">API</a>
        <ul>
            
            
            
            <li><a href="ncapi/readme.html">Overview</a></li>
            
            
            
            <li class="subfolders">
                <a href="#">NCAPI v2</a>
                <ul>
                    
                    
                    
                    <li><a href="ncapi/ncapi2/py_api/readme.html">Python</a></li>
                    
                    
                    
                    
                    
                    <li><a href="ncapi/ncapi2/c_api/readme.html">C/C++</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            <li class="subfolders">
                <a href="#">NCAPI v1</a>
                <ul>
                    
                    
                    
                    <li><a href="ncapi/ncapi1/py_api/readme.html">Python</a></li>
                    
                    
                    
                    
                    
                    <li><a href="ncapi/ncapi1/c_api/readme.html">C/C++</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            <li class="subfolders">
                <a href="#">NCAPI v1 to NCAPI v2 Conversion</a>
                <ul>
                    
                    
                    
                    <li><a href="ncapi/python_api_migration.html">Python</a></li>
                    
                    
                    
                    
                    
                    <li><a href="ncapi/c_api_migration.html">C/C++</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            
        </ul>
    </li>
    
    
    
    
    
    
    <li class="singlenav">
    
    <a href="examples.html">Examples</a>
    </li>
    
    
    
    
    
    
    <li class="singlenav">
    
    <a href="release_notes.html">Release Notes</a>
    </li>
    
    
    
    
    
    
    <li class="singlenav">
    
    <a href="support.html">Support</a>
    </li>
    
    
    
    
    <!-- if you aren't using the accordion, uncomment this block:
       <p class="external">
           <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
       </p>
       -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <h1 id="caffe-support">Caffe Support</h1>

<p><a href="http://caffe.berkeleyvision.org/">Caffe</a> is a deep learning framework developed by Berkeley AI Research (<a href="http://bair.berkley.edu">BAIR</a>) and by community contributors.</p>

<p>Each version of the Intel® Movidius™ Neural Compute SDK (Intel® Movidius™ NCSDK) installs and is validated with a single version of Caffe that provides broad network support for that release. The specific version installed may change from release to release. Other versions of Caffe may work with the NCSDK but are not officially supported and may require customization for your specific development machine.</p>

<p>The setup script currently downloads <a href="https://github.com/weiliu89/caffe/tree/master">SSD Caffe</a> and installs it in a system location.<br />
A soft link to the Caffe installation is available at <em>/opt/movidius/caffe</em></p>

<h2 id="caffe-models">Caffe Models</h2>

<p>Caffe models consist of two files that are used for compiling the caffe model using the NCSDK <a href="tools/compile.html">mvNCCompile</a> tool:</p>
<ul>
  <li><strong>.prototxt</strong> - Text file that describes the topology and layers of the network</li>
  <li><strong>.caffemodel</strong> - Binary file that contains the weights for each layer that are obtained after training a model</li>
</ul>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Further reading: <a href="https://movidius.github.io/blog/deploying-custom-caffe-models/">Deploying Your Customized Caffe Models on Intel® Movidius™ Neural Compute Stick</a></div>

<h2 id="caffe-layer-support">Caffe Layer Support</h2>
<p>The following layers are supported in Caffe by the NCSDK. The NCSDK does not support network training, so some layers that are only required for training are not supported.</p>

<h4 id="activationneuron">Activation/Neuron</h4>
<ul>
  <li>bias</li>
  <li>elu</li>
  <li>prelu</li>
  <li>relu</li>
  <li>scale</li>
  <li>sigmoid</li>
  <li>tanh</li>
</ul>

<h4 id="common">Common</h4>
<ul>
  <li>inner_product</li>
</ul>

<h4 id="normalization">Normalization</h4>
<ul>
  <li>batch_norm</li>
  <li>lrn</li>
</ul>

<h4 id="utility">Utility</h4>
<ul>
  <li>concat</li>
  <li>eltwise</li>
  <li>flatten</li>
  <li>parameter</li>
  <li>reshape</li>
  <li>slice</li>
  <li>softmax</li>
</ul>

<h4 id="vision">Vision</h4>
<ul>
  <li>conv
    <ul>
      <li>Regular Convolution - 1x1s1, 3x3s1, 5x5s1, 7x7s1, 7x7s2, 7x7s4</li>
      <li>Group Convolution - &lt;1024 groups total</li>
    </ul>
  </li>
  <li>deconv</li>
  <li>pooling</li>
</ul>

<h2 id="known-issues">Known Issues</h2>
<h4 id="caffe-input-layer">Caffe Input Layer</h4>

<p>Limitation: Batch Size, which is the first dimension, must always be 1</p>

<p>Limitation: The number of inputs must be 1</p>

<p>Limitation: We don’t support this “input_param” format for the input layer:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1 name: "GoogleNet" 
2 layer { 
3   name: "data" 
4   type: "Input" 
5   top: "data" 
6   input_param { shape: { dim: *10* dim: 3 dim: 224 dim: 224 } } 
7 } 
</code></pre></div></div>

<p>We only support this “input_shape” format for the input layer:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>name: "GoogleNet" 
input: "data"
 input_shape 
{ dim:1 dim:3 dim:224 dim:224 } 
</code></pre></div></div>

<h3 id="input-name">Input Name</h3>
<p>Input should be always called “data”.</p>

<p>This works:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>name: "GoogleNet" 
input: "data"
 input_shape 
{ dim:1 dim:3 dim:224 dim:224 } 
</code></pre></div></div>

<p>This does not:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>name: "GoogleNet" 
input: "data_x"
 input_shape 
{ dim:1 dim:3 dim:224 dim:224 } 
</code></pre></div></div>

<h4 id="crop-layer">Crop Layer</h4>
<p>Limitation: Crop layer cannot take reference size layer from input:”data”.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>layer {
  name: "score"
  type: "Crop"
  bottom: "upscore"
  bottom: "data"
  top: "score"
  crop_param {
    axis: 2
    offset: 18
  }
}
</code></pre></div></div>

<h4 id="size-limitations">Size Limitations</h4>
<p>Compiled Movidius™ “graph” file &lt; 320 MB;
Intermediate layer buffer size &lt; 100 MB</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Error 35] Setup Error: Not enough resources on Myriad to process this network
</code></pre></div></div>

<p>Scratch Memory size &lt; 112 KB</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Error 25] Myriad Error: "Matmul scratch memory [112640] lower than required [165392]"
</code></pre></div></div>

        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2018 Intel Corporation <br />
                    * Other names and brands may be claimed as the property of others.
                </div>
            </div>
</footer>

</html>
